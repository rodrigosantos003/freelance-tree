<!DOCTYPE html>
<html lang="pt">

<head>
    <!-- META TAGS -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS FILES -->
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/menu.css">
    <link rel="stylesheet" type="text/css" href="css/users.css">
    <link rel="stylesheet" type="text/css" href="css/media_queries.css">

    <!-- SITE IDENTITY -->
    <link rel="icon" href="img/freelancetree_icon.png">
    <title>Freelance Tree</title>
</head>

<body>
    <!-- NAVIGATION BAR -->
    <nav class="menu" id="navbar">
        <a href="javascript:logOut()">Sair</a>
        <a href="client.html">Área Pessoal</a>
        <div class="submenu">
            <button class="submenubtn">Categorias &darr;</button>
            <nav class="submenu-items" id="subnav">
                <a href="categorias/digital_marketing.html">Marketing Digital</a>
                <a href="categorias/graphics_design.html">Gráficos & Design</a>
                <a href="categorias/music_audio.html">Música & Áudio</a>
                <a href="categorias/video_animation.html">Vídeo & Animação</a>
                <a href="categorias/writing.html">Escrita & Redação</a>
                <a href="categorias/programming_tech.html">Programação & Tech</a>
                <a href="categorias/business.html">Negócios</a>
                <a href="categorias/data.html">Dados</a>
            </nav>
        </div>
        <a href="index.html">Início</a>
    </nav>


    <!-- TITLE -->
    <header>
        <h1>Freelance Tree</h1>
    </header>

    <!-- MAIN CONTENT -->
    <main>
        <section class="user">
            <h2>Cliente</h2>

            <div id="profile">
                <h3 id="client-name">
                    <script>
                        let acc = [];
                        for (let i = 1; i <= localStorage.length; i++) {
                            acc.push(JSON.parse(localStorage.getItem(i)));
                        }

                        for (let k = 0; k < acc.length; k++) {
                            if (acc[k][1] == sessionStorage.getItem("currentLogin")) {
                                document.getElementById("client-name").innerText = acc[k][0];
                            }
                        }
                    </script>
                </h3>
                <p id="email">
                    <script>document.getElementById("email").innerText = sessionStorage.getItem("currentLogin");</script>
                </p>
            </div>

            <div id="work">
                <h3>Trabalhos</h3>
                <button class="button" onclick="createOffer();">Criar Oferta</button>
                <ul class="work-list" id="offers">
                    <script>
                        let accounts = [];
                        let offers = [];

                        for (let i = 1; i <= localStorage.length; i++) {
                            accounts.push(JSON.parse(localStorage.getItem(i)));
                        }

                        for (let k = 0; k < accounts.length; k++) {
                            if (accounts[k][1] == sessionStorage.getItem("currentLogin")) {
                                for (let m = 0; m < accounts[k][4].length; m++) {
                                    offers.push(accounts[k][4][m]);
                                }
                            }
                        }

                        offers.forEach(([title, description, category]) => {
                            let listItem = document.createElement("li");
                            let offerTitle = document.createElement("h4");
                            let offerDescription = document.createElement("p");
                            let offerCategory = document.createElement("p");
                            offerTitle.innerText = title;
                            offerDescription.innerText = description;
                            offerCategory.innerText = "Categoria: " + category;
                            listItem.appendChild(offerTitle);
                            listItem.appendChild(offerDescription);
                            listItem.appendChild(offerCategory);
                            document.getElementById("offers").appendChild(listItem);
                        });
                    </script>
                </ul>
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer>
        <p>Copyright &copy; 2022 | Freelance Tree</p>
    </footer>

    <!-- SCRIPTS -->
    <script src="js/main.js"></script>
</body>